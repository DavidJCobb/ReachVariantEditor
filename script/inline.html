<!doctype html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      
      <title>Inline blocks | ReachVariantTool Documentation</title>
      <base href="../" />
      <link rel="stylesheet" href="resources/main.css" />
      <noscript>
         <link rel="stylesheet" href="resources/noscript.css" />
      </noscript>
      <script src="resources/head.js"></script>
   </head>
   <body>
      <nav id="sidebar">
         <ul>
            <li><a href="index.html">Index</a></li>
            <li>
               <a>Main Window</a>
               <ul>
                  <li>
                     <a href="editor/main_window/index.html">Multiplayer</a>
                     <ul>
                        <li><a href="editor/main_window/metadata.html">Metadata</a></li>
                        <li><a href="editor/main_window/options-general.html">General Settings</a></li>
                        <li><a href="editor/main_window/options-respawn.html">Respawn Settings</a></li>
                        <li><a href="editor/main_window/options-social.html">Social Settings</a></li>
                        <li><a href="editor/main_window/options-map.html">Map and Game Settings</a></li>
                        <li data-dont-default-collapse>
                           <a href="editor/main_window/options-team.html">Team Settings</a>
                           <ul>
                              <li><a href="editor/main_window/options-team-specific.html">Individual Team Settings</a></li>
                           </ul>
                        </li>
                        <li data-dont-default-collapse>
                           <a href="editor/main_window/options-loadout.html">Loadout Settings</a>
                           <ul>
                              <li><a href="editor/main_window/options-loadout-specific.html">Individual Loadout Settings</a></li>
                           </ul>
                        </li>
                        <li><a href="editor/main_window/options-megalo.html">Script-Specific Settings</a></li>
                        <li><a href="editor/main_window/option-visibility.html">Option Visibility</a></li>
                        <li><a href="editor/main_window/tu1.html">Title Update Settings</a></li>
                        <li><a href="editor/main_window/traits.html">(all player traits)</a></li>
                        <li><a href="editor/main_window/forge.html">Forge Settings</a></li>
                     </ul>
                  </li>
                  <li>
                     <a href="editor/main_window_ff/index.html">Firefight</a>
                     <ul>
                        <li><a href="editor/main_window_ff/metadata.html">Metadata</a></li>
                        <li>
                           <a href="editor/main_window_ff/scenario.html">Firefight Settings</a>
                           <ul>
                              <li><a href="editor/main_window_ff/lives.html">Player Lives</a></li>
                              <li><a href="editor/main_window_ff/options-respawn.html">Respawn Settings</a></li>
                              <li><a href="editor/main_window_ff/round.html">Round Settings</a></li>
                              <li><a href="editor/main_window_ff/bonus-wave.html">Bonus Wave Settings</a></li>
                              <li><a href="editor/main_window_ff/custom-skull.html">Custom Skulls</a></li>
                           </ul>
                        </li>
                        <li>
                           <a>Other Settings</a>
                           <ul>
                              <li><a href="editor/main_window_ff/options-general.html">General Settings</a></li>
                              <li><a href="editor/main_window_ff/options-social.html">Social Settings</a></li>
                              <li data-dont-default-collapse>
                                 <a href="editor/main_window_ff/options-team.html">Team Settings</a>
                                 <ul>
                                    <li><a href="editor/main_window_ff/options-team-specific.html">Individual Team Settings</a></li>
                                 </ul>
                              </li>
                              <li data-dont-default-collapse>
                                 <a href="editor/main_window_ff/options-loadout.html">Loadout Settings</a>
                                 <ul>
                                    <li><a href="editor/main_window_ff/options-loadout-specific.html">Individual Loadout Settings</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><a href="editor/main_window_ff/traits.html">(all player traits)</a></li>
                        <li><a href="editor/main_window_ff/traits-wave.html">(all wave traits)</a></li>
                     </ul>
                  </li>
               </ul>
            </li>
            <li>
               <a href="editor/script_window/index.html">Script Window</a>
               <ul>
                  <li><a href="editor/script_window/meta-strings.html">Metadata Strings</a></li>
                  <li>
                     <a href="editor/script_window/string-table.html">All Other Strings</a>
                     <ul>
                        <li><a href="editor/script_window/string-localization.html">Editing and Localization</a></li>
                     </ul>
                  </li>
                  <li><a href="editor/script_window/forge-labels.html">Forge Labels</a></li>
                  <li><a href="editor/script_window/map-permissions.html">Map Permissions</a></li>
                  <li><a href="editor/script_window/player-rating-parameters.html">Player Rating Parameters</a></li>
                  <li><a href="editor/script_window/required-object-types.html">Required Object Types</a></li>
                  <li><a href="editor/script_window/script-options.html">Scripted Options</a></li>
                  <li><a href="editor/script_window/script-traits.html">Scripted Traits</a></li>
                  <li><a href="editor/script_window/script-stats.html">Scripted Stats</a></li>
                  <li><a href="editor/script_window/script-widgets.html">Scripted Widgets</a></li>
                  <li><a href="editor/script_window/gametype-code.html">Gametype Code</a></li>
               </ul>
            </li>
            <li>
               <a href="script/syntax.html">Scripting Language</a>
               <ul>
                  <li><a href="script/alias.html">Aliases</a></li>
                  <li><a href="script/events.html">Events</a></li>
                  <li><a href="script/for.html">For-each-loops</a></li>
                  <li><a href="script/if.html">If-/alt-statements</a></li>
                  <li><a href="script/operators.html">Operators</a></li>
                  <li><a href="script/string-special-chars.html">Special string characters</a></li>
                  <li><a href="script/enum.html">User-defined enums</a></li>
                  <li><a href="script/function.html">User-defined functions</a></li>
                  <li><a href="script/snippets.html">Useful code snippets</a></li>
                  <li><a href="script/declare.html">Variable declarations</a></li>
                  <li><a href="script/best-practices.html">Best practices</a></li>
                  <li data-dont-default-collapse>
                     <a>Advanced</a>
                     <ul>
                        <li><a href="script/scripted-object-count-limit.html">Scripted object count limit</a></li>
                        <li><a href="script/inline.html">Inlined triggers</a></li>
                        <li><a href="script/under-the-hood.html">Under the hood</a></li>
                     </ul>
                  </li>
               </ul>
            </li>
            <li>
               <a href="script/api/index.html">Script API reference</a>
               <ul>
                  <li data-dont-default-collapse>
                     <a>Namespaces</a>
                     <ul>
                        <li><a href="script/api/ns_unnamed.html">Content not in any namespace</a></li>
                        <li><a href="script/api/ns_enums.html">enums</a></li>
                        <li><a href="script/api/ns_game.html">game</a></li>
                        <li><a href="script/api/ns_global.html">global</a></li>
                        <li><a href="script/api/ns_temporaries.html">temporaries</a></li>
                     </ul>
                  </li>
                  <li data-dont-default-collapse>
                     <a>Types</a>
                     <ul>
                        <li data-dont-default-collapse>
                           <a>Variables</a>
                           <ul>
                              <li><a href="script/api/number.html">Number</a></li>
                              <li><a href="script/api/object.html">Object</a></li>
                              <li><a href="script/api/player.html">Player</a></li>
                              <li><a href="script/api/team.html">Team</a></li>
                              <li><a href="script/api/timer.html">Timer</a></li>
                           </ul>
                        </li>
                        <li data-dont-default-collapse>
                           <a>Misc</a>
                           <ul>
                              <li><a href="script/api/bool.html">Bool</a></li>
                              <li><a href="script/api/engine-icon.html">Engine Icon</a></li>
                              <li><a href="script/api/forge-label.html">Forge Label</a></li>
                              <li><a href="script/api/format-string.html">Format String</a></li>
                              <li><a href="script/api/incident.html">Incident</a></li>
                              <li><a href="script/api/object-type.html">Object Type</a></li>
                              <li><a href="script/api/player-set.html">Player Set</a></li>
                              <li><a href="script/api/traits.html">Player Traits</a></li>
                              <li><a href="script/api/sound.html">Sound</a></li>
                              <li><a href="script/api/variant-string-id.html">Variant ID</a></li>
                              <li><a href="script/api/waypoint-icon.html">Waypoint Icon</a></li>
                              <li><a href="script/api/widget.html">Widget</a></li>
                              <li><a href="script/api/widget-icon.html">Widget Icon</a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
               </ul>
            </li>
            <li>
               <a>Concepts</a>
               <ul>
                  <li><a href="concepts/bipeds-and-items.html">Bipeds and items</a></li>
                  <li><a href="concepts/coordinates.html">Coordinates</a></li>
                  <li><a href="concepts/firefight.html">Firefight</a></li>
               </ul>
            </li>
         </ul>
      </nav>
      <main>
         <h1>Inline blocks</h1>
      <p>
         In mid-July 2023, the Master Chief Collection was updated to backport some Halo 4 
         scripting features to Halo: Reach. One of these is the <code>begin</code> action. 
         This is a low-level optimization that allows triggers to be compiled slightly more 
         efficiently.
      </p>
      <pre lang="MegaloEdit">
trigger general
   action for_each player
      temporary number is_survivor false
      temporary number is_zombie   false

      action begin
         condition if current_player.is_zombie == 1
         action set is_zombie = true
      end
      action begin
         condition if current_player.is_zombie == 0
         action set is_survivor = true
      end
   end
end</pre>
      <p>
         ReachVariantTool uses the term <dfn>inlined triggers</dfn> for this feature, in 
         reference to how it works under the hood.
      </p>
      <p>
         Ordinarily, blocks of code are compiled into "trigger" data structures in the Megalo 
         data format, and an "action" is compiled into the script code to "call" these triggers 
         and execute their contents. (In fact, ReachVariantTool implements <a href="script/function.html">user-defined functions</a> 
         by abusing this system and compiling a trigger that gets called from multiple places.) 
         However, there's a limit on how many triggers a gametype can contain.
      </p>
      <p>
         What this new feature does is take some of the data that triggers normally contain 
         (specifically, the data that says, "this part of the code belongs to me; it is inside 
         me"), and it writes that data directly into the action itself. This means that the 
         block of code doesn't become a "real" trigger that contributes to a gametype's overall 
         trigger limit; the block of code is <dfn>inlined</dfn> directly into the very same 
         action that executes it.
      </p>
      <p>
         In order to inline a block in ReachVariantTool, prefix it with an <dfn>inline specifier</dfn>:
      </p>
      <pre>
<span class="keyword">inline</span>: <span class="keyword">do</span>
   <span class="comment">-- ...</span>
<span class="keyword">end</span></pre>
      <p>
         You can only inline <code>do</code>, <code>if</code>, <code>altif</code>, and <code>alt</code> 
         blocks, and you cannot inline a block that is an <a href="script/events.html">event handler</a>. This is 
         because <code>for</code> blocks and event handler blocks require extra information that's only 
         stored in real triggers, not inlined ones.
      </p>
      <p>
         Functions cannot be marked as inline at this time. It would theoretically be possible to 
         compile function calls as inline triggers, without creating a full trigger for the function's 
         body, provided the function doesn't need any functionality that requires full trigger behavior 
         (i.e. the function doesn't have a for-loop as its entire body); however, this is not implemented.
      </p>
   
      </main>
      <script src="resources/sidebar.js"></script>
      <script src="resources/header-links.js"></script>
   </body>
</html>