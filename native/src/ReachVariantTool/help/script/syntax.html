<!doctype html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      
      <title>Basic syntax | ReachVariantTool Documentation</title>
      <base href="../" />
      <link rel="stylesheet" href="resources/main.css" />
      <noscript>
         <link rel="stylesheet" href="resources/noscript.css" />
      </noscript>
      <script src="resources/head.js"></script>
   </head>
   <body>
      <nav id="sidebar">
         <ul>
            <li><a href="index.html">Index</a></li>
            <li>
               <a>Main Window</a>
               <ul>
                  <li>
                     <a href="editor/main_window/index.html">Multiplayer</a>
                     <ul>
                        <li><a href="editor/main_window/metadata.html">Metadata</a></li>
                        <li><a href="editor/main_window/options-general.html">General Settings</a></li>
                        <li><a href="editor/main_window/options-respawn.html">Respawn Settings</a></li>
                        <li><a href="editor/main_window/options-social.html">Social Settings</a></li>
                        <li><a href="editor/main_window/options-map.html">Map and Game Settings</a></li>
                        <li data-dont-default-collapse>
                           <a href="editor/main_window/options-team.html">Team Settings</a>
                           <ul>
                              <li><a href="editor/main_window/options-team-specific.html">Individual Team Settings</a></li>
                           </ul>
                        </li>
                        <li data-dont-default-collapse>
                           <a href="editor/main_window/options-loadout.html">Loadout Settings</a>
                           <ul>
                              <li><a href="editor/main_window/options-loadout-specific.html">Individual Loadout Settings</a></li>
                           </ul>
                        </li>
                        <li><a href="editor/main_window/options-megalo.html">Script-Specific Settings</a></li>
                        <li><a href="editor/main_window/option-visibility.html">Option Visibility</a></li>
                        <li><a href="editor/main_window/tu1.html">Title Update Settings</a></li>
                        <li><a href="editor/main_window/traits.html">(all player traits)</a></li>
                        <li><a href="editor/main_window/forge.html">Forge Settings</a></li>
                     </ul>
                  </li>
                  <li>
                     <a href="editor/main_window_ff/index.html">Firefight</a>
                     <ul>
                        <li><a href="editor/main_window_ff/metadata.html">Metadata</a></li>
                        <li>
                           <a href="editor/main_window_ff/scenario.html">Firefight Settings</a>
                           <ul>
                              <li><a href="editor/main_window_ff/lives.html">Player Lives</a></li>
                              <li><a href="editor/main_window_ff/options-respawn.html">Respawn Settings</a></li>
                              <li><a href="editor/main_window_ff/round.html">Round Settings</a></li>
                              <li><a href="editor/main_window_ff/bonus-wave.html">Bonus Wave Settings</a></li>
                              <li><a href="editor/main_window_ff/custom-skull.html">Custom Skulls</a></li>
                           </ul>
                        </li>
                        <li>
                           <a>Other Settings</a>
                           <ul>
                              <li><a href="editor/main_window_ff/options-general.html">General Settings</a></li>
                              <li><a href="editor/main_window_ff/options-social.html">Social Settings</a></li>
                              <li data-dont-default-collapse>
                                 <a href="editor/main_window_ff/options-team.html">Team Settings</a>
                                 <ul>
                                    <li><a href="editor/main_window_ff/options-team-specific.html">Individual Team Settings</a></li>
                                 </ul>
                              </li>
                              <li data-dont-default-collapse>
                                 <a href="editor/main_window_ff/options-loadout.html">Loadout Settings</a>
                                 <ul>
                                    <li><a href="editor/main_window_ff/options-loadout-specific.html">Individual Loadout Settings</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><a href="editor/main_window_ff/traits.html">(all player traits)</a></li>
                        <li><a href="editor/main_window_ff/traits-wave.html">(all wave traits)</a></li>
                     </ul>
                  </li>
               </ul>
            </li>
            <li>
               <a href="editor/script_window/index.html">Script Window</a>
               <ul>
                  <li><a href="editor/script_window/meta-strings.html">Metadata Strings</a></li>
                  <li>
                     <a href="editor/script_window/string-table.html">All Other Strings</a>
                     <ul>
                        <li><a href="editor/script_window/string-localization.html">Editing and Localization</a></li>
                     </ul>
                  </li>
                  <li><a href="editor/script_window/forge-labels.html">Forge Labels</a></li>
                  <li><a href="editor/script_window/map-permissions.html">Map Permissions</a></li>
                  <li><a href="editor/script_window/player-rating-parameters.html">Player Rating Parameters</a></li>
                  <li><a href="editor/script_window/required-object-types.html">Required Object Types</a></li>
                  <li><a href="editor/script_window/script-options.html">Scripted Options</a></li>
                  <li><a href="editor/script_window/script-traits.html">Scripted Traits</a></li>
                  <li><a href="editor/script_window/script-stats.html">Scripted Stats</a></li>
                  <li><a href="editor/script_window/script-widgets.html">Scripted Widgets</a></li>
                  <li><a href="editor/script_window/gametype-code.html">Gametype Code</a></li>
               </ul>
            </li>
            <li>
               <a href="script/syntax.html">Scripting Language</a>
               <ul>
                  <li><a href="script/alias.html">Aliases</a></li>
                  <li><a href="script/events.html">Events</a></li>
                  <li><a href="script/for.html">For-each-loops</a></li>
                  <li><a href="script/if.html">If-/alt-statements</a></li>
                  <li><a href="script/operators.html">Operators</a></li>
                  <li><a href="script/string-special-chars.html">Special string characters</a></li>
                  <li><a href="script/enum.html">User-defined enums</a></li>
                  <li><a href="script/function.html">User-defined functions</a></li>
                  <li><a href="script/snippets.html">Useful code snippets</a></li>
                  <li><a href="script/declare.html">Variable declarations</a></li>
                  <li><a href="script/best-practices.html">Best practices</a></li>
                  <li data-dont-default-collapse>
                     <a>Advanced</a>
                     <ul>
                        <li><a href="script/scripted-object-count-limit.html">Scripted object count limit</a></li>
                        <li><a href="script/inline.html">Inlined triggers</a></li>
                        <li><a href="script/under-the-hood.html">Under the hood</a></li>
                     </ul>
                  </li>
               </ul>
            </li>
            <li>
               <a href="script/api/index.html">Script API reference</a>
               <ul>
                  <li data-dont-default-collapse>
                     <a>Namespaces</a>
                     <ul>
                        <li><a href="script/api/ns_unnamed.html">Content not in any namespace</a></li>
                        <li><a href="script/api/ns_enums.html">enums</a></li>
                        <li><a href="script/api/ns_game.html">game</a></li>
                        <li><a href="script/api/ns_global.html">global</a></li>
                        <li><a href="script/api/ns_temporaries.html">temporaries</a></li>
                     </ul>
                  </li>
                  <li data-dont-default-collapse>
                     <a>Types</a>
                     <ul>
                        <li data-dont-default-collapse>
                           <a>Variables</a>
                           <ul>
                              <li><a href="script/api/number.html">Number</a></li>
                              <li><a href="script/api/object.html">Object</a></li>
                              <li><a href="script/api/player.html">Player</a></li>
                              <li><a href="script/api/team.html">Team</a></li>
                              <li><a href="script/api/timer.html">Timer</a></li>
                           </ul>
                        </li>
                        <li data-dont-default-collapse>
                           <a>Misc</a>
                           <ul>
                              <li><a href="script/api/bool.html">Bool</a></li>
                              <li><a href="script/api/engine-icon.html">Engine Icon</a></li>
                              <li><a href="script/api/forge-label.html">Forge Label</a></li>
                              <li><a href="script/api/format-string.html">Format String</a></li>
                              <li><a href="script/api/incident.html">Incident</a></li>
                              <li><a href="script/api/object-type.html">Object Type</a></li>
                              <li><a href="script/api/player-set.html">Player Set</a></li>
                              <li><a href="script/api/traits.html">Player Traits</a></li>
                              <li><a href="script/api/sound.html">Sound</a></li>
                              <li><a href="script/api/variant-string-id.html">Variant ID</a></li>
                              <li><a href="script/api/waypoint-icon.html">Waypoint Icon</a></li>
                              <li><a href="script/api/widget.html">Widget</a></li>
                              <li><a href="script/api/widget-icon.html">Widget Icon</a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
               </ul>
            </li>
            <li>
               <a>Concepts</a>
               <ul>
                  <li><a href="concepts/bipeds-and-items.html">Bipeds and items</a></li>
                  <li><a href="concepts/coordinates.html">Coordinates</a></li>
                  <li><a href="concepts/firefight.html">Firefight</a></li>
               </ul>
            </li>
         </ul>
      </nav>
      <main>
         <h1>Basic syntax</h1>
      <p>
         Back when ReachVariantTool was made, only Bungie and 343 Industries knew what Megalo 
         truly looked like. However, community reverse-engineers figured out Megalo's bytecode, 
         and this made it possible for members of the public to design their own script languages 
         that compile to the same bytecode. That is what was done for ReachVariantTool. Since 
         then, 343 Industries released MegaloEdit, an official editor for Megalo which uses the 
         same language that Bungie used internally.
      </p>
      <p>
         The RVT dialect of Megalo is loosely inspired by Lua syntax, though there are quite a 
         few differences such as the use of zero-indexed collections. It is not compatible with 
         the "true" Megalo language used in MegaloEdit.
      </p>

      <h2>Literals</h2>
      
      <h3>Numbers</h3>
      <p>
         Numbers can be defined with any of the following syntaxes:
      </p>
      <dl>
         <dt>12345</dt>
            <dd>Defines the decimal value 12345.</dd>
         <dt>0x3039</dt>
            <dd>Defines the hexadecimal value 0x3039, which is equal to decimal 12345.</dd>
         <dt>0b11000000111001</dt>
            <dd>Defines a binary value which is equal to decimal 12345.</dd>
      </dl>
      
      <h3>Strings</h3>
      <p>
         Megalo scripts can contain strings. A string is any value that starts and ends with
         <code>"</code>, <code>'</code>, or <code>`</code>. The value must start and end with the
         same symbol.
      </p>
      <p>
         Inside of a string, backslashes have special meaning: they can be used to indicate special
         characters, or to "escape" certain characters from processing.
      </p>
      <dl>
         <dt>
            <code>
               \x<var>HH</var>
            </code>
         </dt>
         <dd>
            Treats <var>HH</var> as a hexadecimal character code. The entire escape sequence
            will be replaced with the Unicode character that has that code. You must always provide
            a two-digit hexadecimal number.
         </dd>
         <dt>
            <code>
               \u<var>HHHH</var>
            </code>
         </dt>
         <dd>
            <p>Treats <var>HHHH</var> as a hexadecimal character code. The entire escape sequence
            will be replaced with the Unicode character that has that code. You must always provide
            a four-digit hexadecimal number.</p>
            <p>There are <a href="script/string-special-chars.html">special codes</a> that can be used to show 
            Halo-specific icons and symbols.</p>
         </dd>
         <dt>
            <code>\"</code>
         </dt>
         <dd>
            Inserts a double-quote mark into the string. You can use this to include double-quotes
            in the text of a string that is itself wrapped in double-quotes, e.g.
            <code>"And then he said, \"Hello!\""</code>
         </dd>
         <dt>
            <code>\'</code>
         </dt>
         <dd>
            Inserts a single-quote mark into the string. You can use this to include single-quotes
            in the text of a string that is itself wrapped in single-quotes, e.g.
            <code>'But that\'s not very nice.'</code>
         </dd>
         <dt>
            <code>\`</code>
         </dt>
         <dd>
            Inserts a backtick into the string. You can use this to include backticks in the text
            of a string that is itself wrapped in backticks, e.g.
            <code>`Backticks are often used instead of apostrophes, but I s\`pose that's a bit odd.`</code>
         </dd>
         <dt>
            <code>
               \<var>[any other character]</var>
            </code>
         </dt>
         <dd>Just inserts the given character.</dd>
         <dt>
            <code>\\</code>
         </dt>
         <dd>Inserts a real backslash into the string.</dd>
      </dl>
      
      <h2>Statements</h2>
      <p>
         Statements in a Megalo script can be divided into three categories: conditions, actions, 
         and blocks. There is no statement separator character; statements are separated with 
         whitespace, and the allowed syntax is limited in order to enable this. Expressions are 
         not supported; for example, the following statement is interpreted as an assignment 
         (<code>a = b</code>) followed by an unexpected operator:
      </p>
      <pre>
a = b + c

<span class="comment">-- The above is interpreted as two statements: "a = b" and "+ c".</span>
<span class="comment">-- The supported syntax is:</span>
<span class="comment">-- a = b</span>
<span class="comment">-- a += c</span></pre>
      
      <h3>Blocks</h3>
      <p>
         The following block types are available:
      </p>
      <dl>
         <dt>do ... end</dt>
            <dd>A generic block.</dd>
         <dt>enum ... end</dt>
            <dd>An <a href="script/enum.html">user-defined enum definition</a>.</dd>
         <dt>for ... do ... end</dt>
            <dd>A piece of code which should be executed multiple times in a row, 
            with specific information made available each time. <a href="script/for.html">More details here.</a></dd>
         <dt>function ... end</dt>
            <dd>A user-defined function which can be "called," or triggered to run, 
            from different parts of the script. <a href="script/function.html">More details here.</a></dd>
         <dt>if ... altif ... alt ... end</dt>
            <dd>A piece of code which should execute if specific conditions are met. 
            <a href="script/if.html">More details here.</a></dd>
      </dl>
      <p>
         Top-level blocks (that is, blocks not nested inside of other blocks) can be prefixed 
         with an <a href="script/events.html">event name</a>.
      </p>
      
      <h3>Actions</h3>
      <p>
         An action is any statement that doesn't appear in an if-block's condition list. Actions 
         can begin with a keyword, or they can take one of the following forms:
      </p>
      <ul>
         <li><code>function(...)</code></li>
         <li><code>variable = function(...)</code></li>
         <li><code>variable = value</code></li>
      </ul>
      <p>
         You can call user-defined functions or hardcoded "action" functions. You cannot call 
         hardcoded "condition" functions.
      </p>
      
      <h3>Conditions</h3>
      <p>
         Conditions are terms in an if-block's condition list. They must take one of the following 
         two forms:
      </p>
      <ul>
         <li><code>function(...)</code></li>
         <li><code>value == other_value</code></li>
      </ul>
      <p>
         Conditions can be prefixed with the word <var>not</var> to invert them. Conditions must be 
         separated from each other with the word <var>or</var> or the word <var>and</var>.
      </p>
      <p>
         You can call hardcoded "condition" functions here, but not user-defined functions or any 
         hardcoded "action" functions.
      </p>
      
      <h2>Variables</h2>
      <p>
         Megalo supports the following variable types:
      </p>
      <ul>
         <li><a href="script/api/number.html">Number</a></li>
         <li><a href="script/api/object.html">Object</a></li>
         <li><a href="script/api/player.html">Player</a></li>
         <li><a href="script/api/team.html">Team</a></li>
         <li><a href="script/api/timer.html">Timer</a></li>
      </ul>
      <p>
         Variables are either global or nested. There is one "global" set of variables that is 
         accessible at all times, and every object, player, and team is also capable of holding 
         its own set of variables. Variables can be referred to by no more than two levels of 
         depth:
      </p>
      <pre>
global.player[0]                     <span class="comment">-- valid</span>
global.player[0].player[1]           <span class="comment">-- valid</span>
global.player[0].player[1].player[2] <span class="comment">-- invalid</span></pre>
      <p>
         In this particular Megalo dialect, you cannot define your own variables; there are a 
         fixed number available. However, you can <a href="script/alias.html">give names to variables</a>, 
         and <a href="script/declare.html">variable declarations</a> can be used to set a variable's 
         networking priority and initial value.
      </p>
      
      <h3>Properties</h3>
      <p>
         A <dfn>property</dfn> is a member of a variable. Properties can appear in any place 
         where a variable of the same type can be used. You cannot access variables or other 
         properties through a property.
      </p>
      <pre>
current_player.team                 <span class="comment">-- valid</span>
current_player.biped.spawn_sequence <span class="comment">-- invalid (var.property.property)</span>
current_player.team.number[0]       <span class="comment">-- invalid (var.property.var)</span></pre>
      <p>
         Most properties cannot be accessed through a nested variable. The <var>biped</var> 
         property on player variables is an exception.
      </p>
      <pre>
current_player.team            <span class="comment">-- valid   (var.property)</span>
current_player.player[0].team  <span class="comment">-- invalid (var.var.property)</span>

current_player.biped           <span class="comment">-- valid (var.biped)</span>
current_player.player[0].biped <span class="comment">-- valid (var.var.biped)</span></pre>
      <p>
         Most properties do not have indices. There is one exception: the <var>script_stat</var> 
         property on players and teams. There, you must use an index to specify the target stat:
      </p>
      <pre>
current_player.script_stat[0]</pre>
      
      <h3>Accessors</h3>
      <p>
         An <dfn>accessor</dfn> uses similar syntax to a property, but can only appear in 
         assignment statements. Internally, these exist as "getter" and "setter" functions. 
         As such, you can use accessors on variables and properties.
      </p>
      <pre>
current_object.shields       += 50 <span class="comment">-- valid; access through variable</span>
current_player.biped.shields += 50 <span class="comment">-- valid; access through property</span></pre>
      <p>
         Most accessors have both getters and setters. Some do not, which means that they can 
         only appear on the appropriate side of an assignment statement.
      </p>
      <pre>
current_object.max_shields += 50              <span class="comment">-- valid; there is a setter for this</span>
global.number[0] = current_object.max_shields <span class="comment">-- invalid; there is no getter for this</span></pre>
      <p>
         From a language design standpoint, accessors were preferred over getter/setter 
         functions in cases where the internal setter takes the same range of assignment 
         operators as an assignment statement. Although the parser as currently designed could 
         accept an assignment operator as an argument (e.g. <code>foo.set_bar(+=, 5)</code>), 
         this was avoided for consistency with almost every other programming language ever 
         made.
      </p>
   
      </main>
      <script src="resources/sidebar.js"></script>
      <script src="resources/header-links.js"></script>
   </body>
</html>