<!doctype html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      
      <title>Format String | ReachVariantTool Documentation</title>
      <base href="../../" />
      <link rel="stylesheet" href="resources/main.css" />
      <noscript>
         <link rel="stylesheet" href="resources/noscript.css" />
      </noscript>
      <script src="resources/head.js"></script>
   </head>
   <body>
      <nav id="sidebar">
         <ul>
            <li><a href="index.html">Index</a></li>
            <li>
               <a>Main Window</a>
               <ul>
                  <li>
                     <a href="editor/main_window/index.html">Multiplayer</a>
                     <ul>
                        <li><a href="editor/main_window/metadata.html">Metadata</a></li>
                        <li><a href="editor/main_window/options-general.html">General Settings</a></li>
                        <li><a href="editor/main_window/options-respawn.html">Respawn Settings</a></li>
                        <li><a href="editor/main_window/options-social.html">Social Settings</a></li>
                        <li><a href="editor/main_window/options-map.html">Map and Game Settings</a></li>
                        <li data-dont-default-collapse>
                           <a href="editor/main_window/options-team.html">Team Settings</a>
                           <ul>
                              <li><a href="editor/main_window/options-team-specific.html">Individual Team Settings</a></li>
                           </ul>
                        </li>
                        <li data-dont-default-collapse>
                           <a href="editor/main_window/options-loadout.html">Loadout Settings</a>
                           <ul>
                              <li><a href="editor/main_window/options-loadout-specific.html">Individual Loadout Settings</a></li>
                           </ul>
                        </li>
                        <li><a href="editor/main_window/options-megalo.html">Script-Specific Settings</a></li>
                        <li><a href="editor/main_window/option-visibility.html">Option Visibility</a></li>
                        <li><a href="editor/main_window/tu1.html">Title Update Settings</a></li>
                        <li><a href="editor/main_window/traits.html">(all player traits)</a></li>
                        <li><a href="editor/main_window/forge.html">Forge Settings</a></li>
                     </ul>
                  </li>
                  <li>
                     <a href="editor/main_window_ff/index.html">Firefight</a>
                     <ul>
                        <li><a href="editor/main_window_ff/metadata.html">Metadata</a></li>
                        <li>
                           <a href="editor/main_window_ff/scenario.html">Firefight Settings</a>
                           <ul>
                              <li><a href="editor/main_window_ff/lives.html">Player Lives</a></li>
                              <li><a href="editor/main_window_ff/options-respawn.html">Respawn Settings</a></li>
                              <li><a href="editor/main_window_ff/round.html">Round Settings</a></li>
                              <li><a href="editor/main_window_ff/bonus-wave.html">Bonus Wave Settings</a></li>
                              <li><a href="editor/main_window_ff/custom-skull.html">Custom Skulls</a></li>
                           </ul>
                        </li>
                        <li>
                           <a>Other Settings</a>
                           <ul>
                              <li><a href="editor/main_window_ff/options-general.html">General Settings</a></li>
                              <li><a href="editor/main_window_ff/options-social.html">Social Settings</a></li>
                              <li data-dont-default-collapse>
                                 <a href="editor/main_window_ff/options-team.html">Team Settings</a>
                                 <ul>
                                    <li><a href="editor/main_window_ff/options-team-specific.html">Individual Team Settings</a></li>
                                 </ul>
                              </li>
                              <li data-dont-default-collapse>
                                 <a href="editor/main_window_ff/options-loadout.html">Loadout Settings</a>
                                 <ul>
                                    <li><a href="editor/main_window_ff/options-loadout-specific.html">Individual Loadout Settings</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><a href="editor/main_window_ff/traits.html">(all player traits)</a></li>
                        <li><a href="editor/main_window_ff/traits-wave.html">(all wave traits)</a></li>
                     </ul>
                  </li>
               </ul>
            </li>
            <li>
               <a href="editor/script_window/index.html">Script Window</a>
               <ul>
                  <li><a href="editor/script_window/meta-strings.html">Metadata Strings</a></li>
                  <li>
                     <a href="editor/script_window/string-table.html">All Other Strings</a>
                     <ul>
                        <li><a href="editor/script_window/string-localization.html">Localization</a></li>
                     </ul>
                  </li>
                  <li><a href="editor/script_window/forge-labels.html">Forge Labels</a></li>
                  <li><a href="editor/script_window/map-permissions.html">Map Permissions</a></li>
                  <li><a href="editor/script_window/player-rating-parameters.html">Player Rating Parameters</a></li>
                  <li><a href="editor/script_window/required-object-types.html">Required Object Types</a></li>
                  <li><a href="editor/script_window/script-options.html">Scripted Options</a></li>
                  <li><a href="editor/script_window/script-traits.html">Scripted Traits</a></li>
                  <li><a href="editor/script_window/script-stats.html">Scripted Stats</a></li>
                  <li><a href="editor/script_window/script-widgets.html">Scripted Widgets</a></li>
                  <li><a href="editor/script_window/gametype-code.html">Gametype Code</a></li>
               </ul>
            </li>
            <li>
               <a href="script/syntax.html">Scripting Language</a>
               <ul>
                  <li><a href="script/alias.html">Aliases</a></li>
                  <li><a href="script/events.html">Events</a></li>
                  <li><a href="script/for.html">For-each-loops</a></li>
                  <li><a href="script/if.html">If-/alt-statements</a></li>
                  <li><a href="script/operators.html">Operators</a></li>
                  <li><a href="script/string-special-chars.html">Special string characters</a></li>
                  <li><a href="script/enum.html">User-defined enums</a></li>
                  <li><a href="script/function.html">User-defined functions</a></li>
                  <li><a href="script/snippets.html">Useful code snippets</a></li>
                  <li><a href="script/declare.html">Variable declarations</a></li>
                  <li><a href="script/best-practices.html">Best practices</a></li>
                  <li data-dont-default-collapse>
                     <a>Advanced</a>
                     <ul>
                        <li><a href="script/inline.html">Inlined triggers</a></li>
                        <li><a href="script/under-the-hood.html">Under the hood</a></li>
                     </ul>
                  </li>
               </ul>
            </li>
            <li>
               <a href="script/api/index.html">Script API reference</a>
               <ul>
                  <li data-dont-default-collapse>
                     <a>Namespaces</a>
                     <ul>
                        <li><a href="script/api/ns_unnamed.html">Content not in any namespace</a></li>
                        <li><a href="script/api/ns_enums.html">enums</a></li>
                        <li><a href="script/api/ns_game.html">game</a></li>
                        <li><a href="script/api/ns_global.html">global</a></li>
                        <li><a href="script/api/ns_temporaries.html">temporaries</a></li>
                     </ul>
                  </li>
                  <li data-dont-default-collapse>
                     <a>Types</a>
                     <ul>
                        <li data-dont-default-collapse>
                           <a>Variables</a>
                           <ul>
                              <li><a href="script/api/number.html">Number</a></li>
                              <li><a href="script/api/object.html">Object</a></li>
                              <li><a href="script/api/player.html">Player</a></li>
                              <li><a href="script/api/team.html">Team</a></li>
                              <li><a href="script/api/timer.html">Timer</a></li>
                           </ul>
                        </li>
                        <li data-dont-default-collapse>
                           <a>Misc</a>
                           <ul>
                              <li><a href="script/api/bool.html">Bool</a></li>
                              <li><a href="script/api/engine-icon.html">Engine Icon</a></li>
                              <li><a href="script/api/forge-label.html">Forge Label</a></li>
                              <li><a href="script/api/format-string.html">Format String</a></li>
                              <li><a href="script/api/incident.html">Incident</a></li>
                              <li><a href="script/api/object-type.html">Object Type</a></li>
                              <li><a href="script/api/player-set.html">Player Set</a></li>
                              <li><a href="script/api/traits.html">Player Traits</a></li>
                              <li><a href="script/api/sound.html">Sound</a></li>
                              <li><a href="script/api/variant-string-id.html">Variant ID</a></li>
                              <li><a href="script/api/waypoint-icon.html">Waypoint Icon</a></li>
                              <li><a href="script/api/widget.html">Widget</a></li>
                              <li><a href="script/api/widget-icon.html">Widget Icon</a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
               </ul>
            </li>
            <li>
               <a>Concepts</a>
               <ul>
                  <li><a href="concepts/bipeds-and-items.html">Bipeds and items</a></li>
                  <li><a href="concepts/firefight.html">Firefight</a></li>
               </ul>
            </li>
         </ul>
      </nav>
      <main>
         <h1>Format String</h1>

      <p>
         Halo: Reach's scripting engine supports the display of "format strings." A 
         format string can be a simple piece of text, but it can also include little 
         placeholders that can be replaced with other values when the string is 
         displayed. Up to two additional values can be provided after the format 
         string itself.
      </p>
      <p>
         A percentage sign (<code>%</code>) marks the start of a placeholder; the 
         content after it determines the type of placeholder to use, and in some 
         cases, the options to use for the placeholder. If you want to write an 
         actual percentage sign in text, you must type <code>%%</code>. Using a 
         placeholder symbol incorrectly (including by writing just one <code>%</code> 
         symbol) will cause Halo: Reach to refuse to display your string.
      </p>
      
      <h2>Placeholder codes by type</h2>
      <style>
      .default-result{display:block;border-top:1px solid #AAA;padding:.25em 0 0 0}
      </style>
      <p>
         Different placeholder codes are intended to format different kinds of 
         information. If you pass a value of the wrong type (e.g. passing a 
         player variable for a placeholder meant for numbers), then you'll see 
         a default value which varies depending on the placeholder code.
      </p>
      <p>
         If you don't pass any value at all, then the placeholder will be 
         cut out of the string, but the string should still display as long as 
         the placeholder itself was valid.
      </p>
      
      <h3>Integer number</h3>
      <dl>
         <dt>%n</dt>
         <dt>%o</dt>
         <dt>%p</dt>
         <dt>%s</dt>
         <dt>%t</dt>
            <dd>
               All of these codes print the number normally, as you would expect.
               <div class="default-result">
                  <b>Default result:</b> <code>0</code>
               </div>
            </dd>
      </dl>
      
      <h3>Object</h3>
      <dl>
         <dt>%n</dt>
         <dt>%o</dt>
         <dt>%p</dt>
         <dt>%s</dt>
         <dt>%t</dt>
            <dd>Displays the name of the object as defined in the map file. Note 
            that most objects don't have actual names defined, and will instead 
            display <code>unknown</code>.</dd>
      </dl>
      
      <h3>Player</h3>
      <dl>
         <dt>%n</dt>
         <dt>%o</dt>
         <dt>%p</dt>
         <dt>%s</dt>
         <dt>%t</dt>
            <dd>Displays the player's Xbox LIVE gamertag.</dd>
      </dl>
      
      <h3>Timer</h3>
      <dl>
         <dt>%n</dt>
         <dt>%o</dt>
         <dt>%p</dt>
         <dt>%s</dt>
         <dt>%t</dt>
            <dd>Displays minutes and seconds, separated with a colon and with 
            the seconds padded to two digits, e.g. <code>0:05</code>.</dd>
      </dl>
      
      <h3>Unknown</h3>
      <dl>
         <dt>%c</dt>
            <dd>Sometimes, this fails as an error and prevents the string from being 
            displayed. Other times, it produces a line break followed by the number 
            25. Notably, in ASCII, the number 25 is used to encode the percentage sign.</dd>
         <dt>%d</dt>
         <dt>%i</dt>
         <dt>%u</dt>
         <dt>%x</dt>
         <dt>%X</dt>
            <dd>
               <p>Seems to always produce <code>1</code>, no matter what you pass in.</p>
               <p>
                  In the C and C++ programming languages, these codes are used to 
                  format integers. You can put additional settings between the 
                  percentage sign and the number, in order to pad the number to 
                  a certain length using spaces or zeroes. Those settings work 
                  here, but they always act as if you passed in the number 1; 
                  <code>%03d</code>, for example, always produces <code>001</code>.
               </p>
            </dd>
         <dt>%S</dt>
         <dt>%Z</dt>
            <dd>Crashes the game instantly, when displayed.</dd>
      </dl>
      
      <h3>Decimal number</h3>
      <p>
         Format codes exist for decimal numbers, but it's not clear why. None of 
         the variable types available to Megalo are decimal numbers, and these 
         codes don't work for timers (except when timers have special meanings 
         for them).
      </p>
      <p>
         These codes seem to be meant for double-precision floating-point values.
      </p>
      <dl>
         <dt>%a</dt>
            <dd>
               Prints the number in hexadecimal (base-16) format.
               <div class="default-result">
                  <b>Default result:</b> <code>0x0.0000000000001p-1022</code>
               </div>
            </dd>
         <dt>%A</dt>
            <dd>
               Same as <code>%a</code>, but the result uses all-caps.
               <div class="default-result">
                  <b>Default result:</b> <code>0X0.0000000000001P-1022</code>
               </div>
            </dd>
         <dt>%e</dt>
            <dd>
               Prints the number using scientific notation.
               <div class="default-result">
                  <b>Default result:</b> <code>0.000000e+00</code>
               </div>
            </dd>
         <dt>%f</dt>
            <dd>
               Prints the number out to six significant figures.
               <div class="default-result">
                  <b>Default result:</b> <code>0.000000</code>
               </div>
            </dd>
         <dt>%g</dt>
            <dd>
               Prints the number out to exactly as many decimal points as is 
               necessary if the number has fewer than six significant digits 
               before the decimal point and fewer than four after; otherwise, 
               uses scientific notation like <code>%e</code> does.
               <div class="default-result">
                  <b>Default result:</b> <code>0</code>
               </div>
            </dd>
      </dl>
      
      <h2>Examples</h2>
      <p>
         Here's an example of how to use format strings: this code, taken from Slayer, 
         displays the number of points needed to win if the game variant has a score 
         limit.
      </p>
      <pre>
<span class="keyword">for</span> <span class="subkeyword">each</span> <span class="subkeyword">player</span> <span class="keyword">do</span> <span class="comment">-- round card</span>
   <span class="keyword">if</span> game.score_to_win != 0 <span class="keyword">and</span> game.teams_enabled == 1 <span class="keyword">then</span> 
      current_player.set_round_card_title(<span class="string">"Kill players on the enemy team.\r\n%n points to win.</span>", game.score_to_win)
   <span class="keyword">end</span>
   <span class="keyword">if</span> game.score_to_win != 0 <span class="keyword">and</span> game.teams_enabled == 0 <span class="keyword">then</span> 
      current_player.set_round_card_title(<span class="string">"Score points by killing other players.\r\n%n points to win.</span>", game.score_to_win)
   <span class="keyword">end</span>
   <span class="keyword">if</span> game.score_to_win == 0 <span class="keyword">and</span> game.teams_enabled == 1 <span class="keyword">then</span> 
      current_player.set_round_card_title(<span class="string">"Kill players on the enemy team.</span>")
   <span class="keyword">end</span>
   <span class="keyword">if</span> game.score_to_win == 0 <span class="keyword">and</span> game.teams_enabled == 0 <span class="keyword">then</span> 
      current_player.set_round_card_title(<span class="string">"Score points by killing other players.</span>")
   <span class="keyword">end</span>
<span class="keyword">end</span></pre>
      <p>
         Note that the game appears to handle strings with improper format codes 
         by simply refusing to display the string at all.
      </p>
      
   
      </main>
      <script src="resources/sidebar.js"></script>
      <script src="resources/header-links.js"></script>
   </body>
</html>